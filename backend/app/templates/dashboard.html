{% extends 'layout.html' %}

{% block title %}Dashboard - Tranquil Tides{% endblock %}

{% block content %}
    <h2>Your Mood Dashboard</h2>

    <section class="dashboard-section">
        <div class="dashboard-overview">
            <h3>Mood Overview</h3>
            <p>Latest mood prediction: <strong>{{ latest_mood }}</strong></p>
            <p>Trend insights: Your mood has been <strong>{{ trend }}</strong> over the past few weeks.</p>
        </div>

        <div class="chart-container">
            <h3>Mood Trends</h3>
            <!-- This will render the dynamic chart using Plotly -->
            <div id="mood-trend-chart"></div>
        </div>

        <div class="recent-assessments">
            <h3>Recent Assessments</h3>
            <ul>
                {% for assessment in assessments %}
                    <li>{{ assessment.date }} - Mood: {{ assessment.mood }} - Anxiety: {{ assessment.anxiety }} - Depression: {{ assessment.depression }}</li>
                {% endfor %}
            </ul>
        </div>
    </section>

    <script>
        // Sample data passed from Flask
        const moodData = {{ mood_data | tojson }};
        const dates = {{ dates | tojson }};

        // Call the function to render the chart using the data
        renderMoodChart('mood-trend-chart', moodData, dates);
    </script>
{% endblock %}
